{% extends " application/layout .html" %}

{{$pageTitle}}Travelling to or from work{{/pageTitle}}

{{$content}}

<main id="content" role="main">

{{>includes/alpha}}

<div class="grid-row">

  {{>includes/leftcol_v9}}

<section class="column-two-thirds" aria-labelledby="thirdparty">

  <!-- BACK LINK -->
  <p class="back-link"><a href="javascript:history.go(-1);">Back</a></p>

	<!-- HEADING -->
  <h1 class="form-title heading-large" style="margin-bottom:30px;">
    <span class="section-progress">Section 3 of 7</span>
    Does your condition cause you difficulty travelling to or from work?
  </h1>

  <form action="travel-why" method="post" class="form" id="theForm">

    <!-- Do you need - Yes No -->
    <fieldset class="inline">
      <div class="form-group">
        <input id="help-travelling-yes" type="radio" name="help-travelling" value="Yes"/>
        <label id="screen1" class="form-label form-control-radio" data-target="travel-options" for="help-travelling-yes">Yes</label>
      </div>
      <div class="form-group form-group-compound">
        <input id="help-travelling-no" type="radio" name="help-travelling" value="No" />
        <label class="form-label form-control-radio" data-target="" for="help-travelling-no">No</label>
      </div>
    </fieldset>

    <div class="form-group js-hidden panel-indent" id="travel-options" style="margin-bottom:30px !important;">

      <!-- WHAT DO YOU NEED -->
      <fieldset class="form-group">
        
        <legend class="heading-medium">Which of these do you use to get to or from work?</legend>
        
        <input id="travel-now-walk" type="checkbox" name="travel-now" value="walking" />
        <label class="form-label form-control-checkbox" for="travel-now-walk">Walking</label>

        <input id="travel-now-bike" type="checkbox" name="travel-now" value="bicycle" />
        <label class="form-label form-control-checkbox" for="travel-now-bike">Bicycle</label>

        <input id="travel-now-bus" type="checkbox" name="travel-now" value="bus or tram" />
        <label class="form-label form-control-checkbox" for="travel-now-bus">Bus or tram</label>
        
        <input id="travel-now-train" type="checkbox" name="travel-now" value="train" />
        <label class="form-label form-control-checkbox" for="travel-now-train">Train</label>
              
        <input id="travel-now-car" type="checkbox" name="travel-now" value="car or getting a lift" />
        <label class="form-label form-control-checkbox" for="travel-now-car">Car or get a lift</label>

        <input id="travel-now-se" type="checkbox" name="travel-now" value="something else" />
        <label class="form-label form-control-checkbox" for="travel-now-se" data-target="se-ask">Something else</label>
        <fieldset class="mid-form js-hidden" id="se-ask">
          <div class="form-group panel-indent mid-form">
            <label class="form-label" for="travel-now-se-ask">What is that?</label>
            <input class="form-control" id="travel-now-se-ask" name="travel-now-se-ask" type="text" aria-required="true">      
          </div>
        </fieldset>

      </fieldset>      

    </div><!-- .form-group -->    

    <!-- NEXT BUTTON -->
    <fieldset class="primary-nav form-group" style="margin-top:30px">
      <legend>Form Navigation</legend>
      <ul>
        <li><input type="submit" value="Next" class="button" id="nextButton"/></li>
      </ul>
    </fieldset>

  </form>

</section><!-- .column-two-thirds -->

{{> application/rightcol }}

</div><!-- .grid-row -->

</main>

{{/content}}

{{/ application/layout }}

<script type="text/javascript">
  $('#nextButton').on('click',function(e)
  {
    e.preventDefault();

    var picked = false;
    $('input[name="help-travelling"]').each(function(i,el)
    {
      if( $(el).prop('checked') ) // if Yes or No has been ticked.
      {        
        if ( $(el).val() == 'No' ) // if it's No.
        {
          picked = true;
          $('form').attr('action','during-work');  
        }        

        if ( $(el).val() == 'Yes' ) // if it's No.
        {
          $('input[name="travel-now"]').each(function(i,el)
          {
            if ($(el).prop('checked')) picked = true;
          });
        }        
      }
    });

    Cookies.set('travel_count',0);

    if (picked) $('form').submit();
    else alert('Please pick one.');
  });
</script>