{% extends "application/layout.html" %}

{% block pageTitle %}Travelling now{% endblock %}

{% block content %}

<main id="content" role="main">

{% include "includes/alpha.html" %}

<div class="grid-row">

<section class="column-two-thirds" aria-labelledby="thirdparty">

  <script type="text/javascript">
    var the_needs = [];
    {% for item in travel_now %}
      the_needs.push('{{ item }}');
    {% endfor %}
    if (the_needs[0] == '') the_needs[0] = '{{ travel_now }}';      
  </script>

  <!-- BACK LINK -->
  <p class="back-link"><a href="javascript:history.go(-1);">Back</a></p>

	<!-- HEADING -->
  <h1 class="form-title heading-large">
    <span class="section-progress">Section 3 of 7</span>
    {% block pageTitle %}{% endblock %} 
  </h1>

  <form action="travel-why" method="post" class="form" id="theForm">

    <!-- HOW MANY HOURS -->
    <div class="form-group">

      <!-- WHY DO YOU NEED -->
      <div class="form-group">
        <label class="form-label-bold" for="reasons" id="">
          How is travelling by <span class="need" style="color:#005ea5"></span> harder for you because of your condition?
        </label>
        <textarea class="form-control" id="reasons" name="reasons"></textarea>
      </div>

      <!-- HOW MANY HOURS -->
      <fieldset class="inline">
        
        <label class="form-label-bold" for="full-name" id="full-name-label">
          How often do you travel by <span class="need" style="color:#005ea5"></span> for work usually?
        </label>
      
        <p>Count each journey separately, eg if you go to and from work the same way, that would be 2 journeys a day.</p>

        <div class="form-group">
          <label class="form-label horizontal-right-label" for="currency-pound">
            <input type="text" class="form-control form-control-4-chars" id="currency-pound">times
          </label>
        </div>

        <div class="form-group">
          <label class="form-label">
            <select class="form-select">
              <option>a week</option>
              <option>a month</option>
              <!-- <option>a year</option> -->
            </select>
          </label>
        </div>

      </fieldset>

    </div>

    <fieldset class="primary-nav form-group">
		  <legend>Form Navigation</legend>
        <ul> <li><input type="submit" value="Next" class="button" id="submitButton"/></li> </ul>
    </fieldset>

  </form>

</section><!-- .column-two-thirds -->

{% include "application/rightcol.html" %}

</div><!-- .grid-row -->

</main>

{% endblock %}
{% block page_script %}
<script type="text/javascript">
  $(document).on('ready',function()
  {
    // grab the count from the cookie (if it exists).
    var t = window.location.hash.substring(1);
    if (!t) t = 0;

    // just put the first one on the page.
    var travel_count = t;  
    var the_text = the_needs[travel_count];
    if (the_text == 'something else') the_text = JSON.parse(Cookies.get('travel_now_se_ask'));
    $('.need').text(the_text);

    var form = $('form');
    
    $('#submitButton').on('click',function(e)
    {
      e.preventDefault();
      
      travel_count++;       
      if (travel_count < the_needs.length)
      {
        Cookies.set('travel_count',travel_count);
        form.attr('action','travel-why#'+travel_count);
        form.submit();
    
      } else {
    
        form.attr('action','travel-not');
        form.submit();
      }
    });
  });
</script>
{% endblock %}
